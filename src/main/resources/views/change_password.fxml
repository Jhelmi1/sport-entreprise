<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="app.controllers.ChangePasswordController"
            style="-fx-background-color: white;">

    <!-- HEADER -->
    <top>
        <HBox spacing="16"
              alignment="CENTER_LEFT"
              style="-fx-background-color: white;
                     -fx-padding: 15 30 15 30;
                     -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.12), 12, 0.15, 0, 2);">

            <ImageView fitHeight="50" preserveRatio="true">
                <image>
                    <Image url="@/assets/lcss.png"/>
                </image>
            </ImageView>

            <Region HBox.hgrow="ALWAYS"/>

            <Button text="Retour" onAction="#onBack"/>
        </HBox>
    </top>

    <!-- CONTENT -->
    <center>
        <VBox alignment="CENTER">
            <padding>
                <Insets top="30" right="30" bottom="30" left="30"/>
            </padding>

            <!-- CARD -->
            <VBox spacing="12"
                  alignment="CENTER_LEFT"
                  prefWidth="420"
                  style="-fx-background-color: white;
                         -fx-padding: 22;
                         -fx-background-radius: 14;
                         -fx-border-radius: 14;
                         -fx-border-color: #e6e6e6;
                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.10), 14, 0.20, 0, 3);">

                <Label text="Changer mot de passe"
                       style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

                <Label text="Mot de passe actuel"/>
                <PasswordField fx:id="currentPasswordField" promptText="Mot de passe actuel"/>

                <Label text="Nouveau mot de passe"/>

                <!-- NEW PASSWORD (HIDE/SHOW) -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <StackPane HBox.hgrow="ALWAYS">
                        <PasswordField fx:id="newPasswordField" promptText="Nouveau mot de passe"/>
                        <TextField fx:id="newPasswordTextField" promptText="Nouveau mot de passe" visible="false" managed="false"/>
                    </StackPane>
                    <ToggleButton fx:id="toggleNew" text="ðŸ‘" onAction="#onToggleNew"/>
                </HBox>

                <!-- Strength -->
                <ProgressBar fx:id="strengthBar" prefWidth="999" progress="0"/>
                <Label fx:id="strengthLabel" text="Force : -" style="-fx-text-fill: #666666;"/>

                <Label text="Confirmer nouveau mot de passe"/>

                <!-- CONFIRM (HIDE/SHOW) -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <StackPane HBox.hgrow="ALWAYS">
                        <PasswordField fx:id="confirmPasswordField" promptText="Confirmer nouveau mot de passe"/>
                        <TextField fx:id="confirmPasswordTextField" promptText="Confirmer nouveau mot de passe" visible="false" managed="false"/>
                    </StackPane>
                    <ToggleButton fx:id="toggleConfirm" text="ðŸ‘" onAction="#onToggleConfirm"/>
                </HBox>

                <Label fx:id="matchLabel" text="" />

                <Label fx:id="errorLabel" textFill="red"/>
                <Label fx:id="successLabel" textFill="green"/>

                <Button text="Enregistrer" onAction="#onSave" prefWidth="999"/>

            </VBox>
        </VBox>
    </center>

</BorderPane>
